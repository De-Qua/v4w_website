//import L from 'leaflet';
//import Modal from '../../templates/index';
 /*!
  * Venessia4Working Javascripts
  * Copyleft 2020
  * Licensed under AGPLv3
  */

/* Function to detect if a device is touch or not.
	All the credits to https://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript/4819886#4819886
*/
function is_touch_device() {

    var prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');

    var mq = function (query) {
        return window.matchMedia(query).matches;
    }

    if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {
        return true;
    }

    // include the 'heartz' as a way to have a non matching MQ to help terminate the join
    // https://git.io/vznFH
    var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');
    return mq(query);

}

var isTouchDevice = is_touch_device();
console.log("Is touch device? "+isTouchDevice);

function searchAgain() {
    document.getElementById("trovato").style.display = "none";
	document.getElementById("searchbar").style.display = "block";
}

function drawPreLoader() {
	console.log("set opacity..")
	document.getElementById("mapid").style.opacity = 0.3;
	console.log("visualizing div..")
	document.getElementById("loading").style.display = "inline";
	// console.log("drawing preloader..")
	//document.getElementById("loading_gif").src = "/static/assets/loading.gif";
	console.log("done!")
	// setTimeout(console.log("now, ok"), 1000);
	return true;
}

function showSettingsWindow() {
	document.getElementById("mapid").style.opacity = 0.3;
	document.getElementById("dequa_setting_window").style.display = "inline";
}

function hideSettingsWindow() {
	document.getElementById("mapid").style.opacity = 1.0;
	document.getElementById("dequa_setting_window").style.display = "none";
}



function goToNextStep(nextStep) {
  drawPreLoader()
	window.location = nextStep;
  // document.getElementById("ricerca_ind").submit()
}
// function goToNextStep(divElement, what_are_we_doing, searched_start, searched_end, start_found) {
// 	console.log("redirecting..");
// 	console.log(divElement);
// 	var clicked_coords = [divElement.lat, divElement.lng];
// 	//var clicked_coords2 = divElement.attributes.coords;
// 	console.log("cercato"+searched_end);
// 	console.log("what are we doing:"+what_are_we_doing);
// 	//console.log("cliccato: " + clicked_coords + ", " + clicked_coords2);
// 	if (what_are_we_doing == "choosing_start" || what_are_we_doing == "address") {
// 		console.log("starting point was chosen!")
// 		var new_site_to_go = "/?partenza=LatLng("+clicked_coords[0]+", "+clicked_coords[1]+")&arrivo="+searched_end+"#dequa";
// 		window.location = new_site_to_go;
// 	}
// 	else if (what_are_we_doing == "choosing_end") {
// 		console.log("end point was chosen!")
// 		console.log("start"+start_found)
//
// 		var strt_coords = start_found.coordinate;
// 		var new_site_to_go = "/?partenza=LatLng("+strt_coords[0]+", "+strt_coords[1]+")&arrivo=LatLng("+clicked_coords[0]+", "+clicked_coords[1]+")";
// 		window.location = new_site_to_go;
// 	}
// }



